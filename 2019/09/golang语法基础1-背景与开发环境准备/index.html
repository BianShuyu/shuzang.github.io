<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Golang语法基础1-背景与开发环境准备 | Shuzang's Blog</title><meta name=Description content="shuzang's personal blog"><meta property="og:title" content="Golang语法基础1-背景与开发环境准备"><meta property="og:description" content="1. 起源与发展 Go/Golang起源于2007年，并于2009年正式对外发布，是一个完全开源的项目，背后的支持者是谷歌公司，核心设计者是三位著"><meta property="og:type" content="article"><meta property="og:url" content="https://shuzang.top/2019/09/golang%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%801-%E8%83%8C%E6%99%AF%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/"><meta property="article:published_time" content="2019-09-13T00:00:00+00:00"><meta property="article:modified_time" content="2019-09-13T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Golang语法基础1-背景与开发环境准备"><meta name=twitter:description content="1. 起源与发展 Go/Golang起源于2007年，并于2009年正式对外发布，是一个完全开源的项目，背后的支持者是谷歌公司，核心设计者是三位著"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel=canonical href=https://shuzang.top/2019/09/golang%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%801-%E8%83%8C%E6%99%AF%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=prev href=https://shuzang.top/2019/09/%E5%9F%BA%E4%BA%8Equorum%E6%90%AD%E5%BB%BA%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%AE%9E%E9%AA%8C%E5%B9%B3%E5%8F%B0%E6%97%A7/><link rel=next href=https://shuzang.top/scaleless-net-light-tower/><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/css/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/css/lib/forkawesome/fork-awesome.min.css><link rel=stylesheet href=/css/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Golang语法基础1-背景与开发环境准备","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.top\/2019\/09\/golang%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%801-%E8%83%8C%E6%99%AF%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87\/"},"image":{"@type":"ImageObject","url":"https:\/\/shuzang.top\/cover.png","width":800,"height":600},"genre":"posts","keywords":"Golang","wordcount":6982,"url":"https:\/\/shuzang.top\/2019\/09\/golang%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%801-%E8%83%8C%E6%99%AF%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87\/","datePublished":"2019-09-13T00:00:00\x2b00:00","dateModified":"2019-09-13T00:00:00\x2b00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"shuzang","logo":{"@type":"ImageObject","url":"https:\/\/shuzang.top\/logo.png","width":127,"height":40}},"description":""}</script></head><body><script>if(!window.localStorage||!window.localStorage.getItem('theme')){window.isDark=''==='dark';}else{window.isDark=(window.localStorage&&window.localStorage.getItem('theme'))==='dark';}
window.isDark&&document.body.classList.add('dark-theme');</script><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class="header-title animated bounceIn"><a href=https://shuzang.top>Shuzang's Blog</a></div><div class=menu><a class=menu-item href=https://shuzang.top/posts>Posts</a><a class=menu-item href=https://shuzang.top/categories>Categories</a><a class=menu-item href=https://shuzang.top/tags>Tags</a><a class=menu-item href=https://shuzang.top/about>About</a><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></header><header class=mobile id=header-mobile><div class=header-wrapper><div class=header-container><div class="header-title animated bounceIn"><a href=https://shuzang.top>Shuzang's Blog</a></div><div class=menu-toggle id=menu-toggle><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=https://shuzang.top/posts>Posts</a><a class=menu-item href=https://shuzang.top/categories>Categories</a><a class=menu-item href=https://shuzang.top/tags>Tags</a><a class=menu-item href=https://shuzang.top/about>About</a><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></header><script>window.desktopHeaderMode=null;window.mobileHeaderMode=null;</script><main class=main><div class=container><article class="page single"><h1 class="single-title animated flipInX">Golang语法基础1-背景与开发环境准备</h1><div class=meta><div class=meta-line><a class=author href=https://shuzang.top rel=author target=_blank><i class="fas fa-user-circle fa-fw"></i>shuzang
</a>&nbsp;<span class=post-category>included in&nbsp;<i class="far fa-folder fa-fw"></i><a href=https://shuzang.top/categories/%E7%88%B1%E7%BC%96%E7%A8%8B%E7%88%B1%E6%8A%80%E6%9C%AF%E7%9A%84%E5%AD%A9%E5%AD%90/>爱编程爱技术的孩子</a>&nbsp;</span></div><div class=meta-line><i class="far fa-calendar-alt fa-fw"></i><time datetime=2019-09-13>2019-09-13</time>&nbsp;
<i class="fas fa-pencil-alt fa-fw"></i>about 6982 words&nbsp;
<i class="far fa-clock fa-fw"></i>14 min&nbsp;<span id=/2019/09/golang%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%801-%E8%83%8C%E6%99%AF%E4%B8%8E%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83%E5%87%86%E5%A4%87/ class=leancloud_visitors data-flag-title=Golang语法基础1-背景与开发环境准备>
<i class="far fa-eye fa-fw"></i><span class=leancloud-visitors-count></span>pageviews
</span>&nbsp;</div></div><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><a href=#1-起源与发展>1. 起源与发展</a></li><li><a href=#2-跟踪最新动态>2. 跟踪最新动态</a></li><li><a href=#3-下载安装>3. 下载安装</a><ul><li><a href=#31-下载>3.1 下载</a></li><li><a href=#32-安装和配置环境变量>3.2 安装和配置环境变量</a><ul><li><a href=#windows>windows</a></li><li><a href=#linux>Linux</a></li></ul></li><li><a href=#33-环境变量说明>3.3 环境变量说明</a></li><li><a href=#34-代码目录结构>3.4 代码目录结构</a></li><li><a href=#35-安装目录清单>3.5 安装目录清单</a></li></ul></li><li><a href=#4-第一个程序>4. 第一个程序</a></li><li><a href=#5-第一个库>5. 第一个库</a></li><li><a href=#6-编辑器ide和其它工具>6. 编辑器、IDE和其它工具</a><ul><li><a href=#61-概述>6.1 概述</a></li><li><a href=#62-vscode>6.2 VScode</a><ul><li><a href=#go工具链>Go工具链</a></li><li><a href=#用户和工作区设置>用户和工作区设置</a></li><li><a href=#特性说明>特性说明</a></li><li><a href=#重命名符号>重命名符号</a></li><li><a href=#调试>调试</a></li><li><a href=#运行>运行</a></li></ul></li></ul></li></ul></nav></div></div><div class=post-toc-mobile id=post-toc-mobile><details><summary><div class=post-toc-title><span>Contents</span>
<span><i class="details icon fas fa-angle-down"></i></span></div></summary><div class=post-toc-content><nav id=TableOfContentsMobile><ul><li><a href=#1-起源与发展>1. 起源与发展</a></li><li><a href=#2-跟踪最新动态>2. 跟踪最新动态</a></li><li><a href=#3-下载安装>3. 下载安装</a><ul><li><a href=#31-下载>3.1 下载</a></li><li><a href=#32-安装和配置环境变量>3.2 安装和配置环境变量</a><ul><li><a href=#windows>windows</a></li><li><a href=#linux>Linux</a></li></ul></li><li><a href=#33-环境变量说明>3.3 环境变量说明</a></li><li><a href=#34-代码目录结构>3.4 代码目录结构</a></li><li><a href=#35-安装目录清单>3.5 安装目录清单</a></li></ul></li><li><a href=#4-第一个程序>4. 第一个程序</a></li><li><a href=#5-第一个库>5. 第一个库</a></li><li><a href=#6-编辑器ide和其它工具>6. 编辑器、IDE和其它工具</a><ul><li><a href=#61-概述>6.1 概述</a></li><li><a href=#62-vscode>6.2 VScode</a><ul><li><a href=#go工具链>Go工具链</a></li><li><a href=#用户和工作区设置>用户和工作区设置</a></li><li><a href=#特性说明>特性说明</a></li><li><a href=#重命名符号>重命名符号</a></li><li><a href=#调试>调试</a></li><li><a href=#运行>运行</a></li></ul></li></ul></li></ul></nav></div></details></div><div class=content><h2 id=1-起源与发展>1. 起源与发展</h2><p>Go/Golang起源于2007年，并于2009年正式对外发布，是一个完全开源的项目，背后的支持者是谷歌公司，核心设计者是三位著名IT工程师：Ken Thompson，Rob Pike，Robert Griesemer。分别是如下从左到右三位</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/69148911-51530900-0b10-11ea-9c23-6939ca51252a.jpg alt=Go语言核心设计者 class=lazyload><figcaption class=image-caption>Go语言核心设计者</figcaption></figure></p><p>其中Ken Thompson是 Unix操作系统的设计者，并因此获得图灵奖，也是C语言前身B语言的设计者，UTF-8编码设计者之一，计算机史的重要人物，2006年加入谷歌，和另外两人一起设计了Go语言。 Rob Pike是Ken的老搭档。</p><p>随后又有lan Lance Taylor和Russ Cox两人加入团队，前者是gccgo编译器的作者和cgo工具链的维护者，后者加入团队后着手Go语言标准包的开发。下图分别是他们两个</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/69148905-4f894580-0b10-11ea-9574-3c09e2e0cabe.jpg alt=Go语言核心开发者 class=lazyload><figcaption class=image-caption>Go语言核心开发者</figcaption></figure></p><p>Go语言以囊地鼠(Gopher)为图标和吉祥物，这是一种原产于加拿大的啮齿类动物，Go语言开发者也一般自称为Gopher。下图中左边是囊地鼠，右边是Go logo.</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/69148909-50ba7280-0b10-11ea-923a-fbe67ab96459.jpg alt=Gopher class=lazyload><figcaption class=image-caption>Gopher</figcaption></figure></p><p>Go语言相比于其它语言的最大优势在于它的执行性能与开发效率，这得益于Go在并发编程、内存回收等许多方面的良好设计，并因此大规模用于服务器编程、网络编程、数据库和云平台领域。</p><p>比较出名的Go语言项目有(不限于这些)</p><ul><li>Go语言本身： <a href=https://github.com/golang/go>https://github.com/golang/go</a></li><li>Docker： <a href=https://www.docker.com/>https://www.docker.com/</a></li><li>kubernetes： <a href=https://github.com/kubernetes/kubernetes>https://github.com/kubernetes/kubernetes</a></li><li>Ethereum： <a href=https://github.com/ethereum/go-ethereum>https://github.com/ethereum/go-ethereum</a></li><li>fabric： <a href=https://github.com/hyperledger/fabric>https://github.com/hyperledger/fabric</a></li><li>Hugo： <a href=https://github.com/gohugoio/hugo>https://github.com/gohugoio/hugo</a></li><li>TiDB： <a href=https://github.com/pingcap/tidb>https://github.com/pingcap/tidb</a></li><li>InfluxDB： <a href=https://github.com/influxdata/influxdb>https://github.com/influxdata/influxdb</a></li><li>ETCD： <a href=https://github.com/etcd-io/etcd>https://github.com/etcd-io/etcd</a></li></ul><p>使用Go的国外公司有：Google, Docker, NetFlix, CloudFlare, Dropbox, MongoDB, Uber等</p><p>使用Go的国内公司有：七牛、字节跳动、bilibili、京东、<a href=https://github.com/baidu/bfe target=_blank>百度</a>
，其实大部分公司包括小米、腾讯、阿里等都在使用Go</p><h2 id=2-跟踪最新动态>2. 跟踪最新动态</h2><p>最直接的方式是跟踪Go语言的源码库，关注提交历史和<a href=https://github.com/golang/go/issues target=_blank>issue</a></p><ol><li>原始代码库： <a href=https://go.googlesource.com/go>https://go.googlesource.com/go</a></li><li>github镜像： <a href=https://github.com/golang/go>https://github.com/golang/go</a></li></ol><p>其它活跃论坛或动态</p><ul><li><a href=https://groups.google.com/forum/#!forum/golang-dev target=_blank>golang-dev</a>
：Google邮件列表的Go开发组讨论区</li><li><a href=https://groups.google.com/forum/#!forum/golang-nuts target=_blank>golang-nuts</a>
：Google邮件列表的Go讨论社区</li><li><a href=https://groups.google.com/forum/#!forum/golang-announce target=_blank>golang-announce</a>
：发布Go版本或Go开发的最新状态</li><li><a href=https://go.dev/ target=_blank>go.dev</a>
：刚刚上线(2019.11.14)的Go开发人员中心</li><li><a href=https://golangclub.com/ target=_blank>golangclub</a>
：go.dev在国内对应的本地化站点</li><li><a href=https://changelog.com/gotime target=_blank>gotime</a>
：Go的一个播客，每周一更，内容有干货</li><li><a href=https://twitter.com/golang target=_blank>@golang</a>
：Go 语言在 Twitter 的官方帐号</li></ul><p>此外还有每年举办的几个大会</p><ul><li>Gopher Con，举办地在美国，时间不定，今年在7月，2020年会在6月份举行<ul><li>官网：https://www.gophercon.com/</li><li>github会议总结： <a href=https://github.com/gophercon>https://github.com/gophercon</a></li></ul></li><li>GopherChina，举办地在中国，每年4月份<ul><li>官网： <a href=https://gopherchina.org/>https://gopherchina.org/</a></li><li>github会议总结： <a href=https://github.com/gopherchina/conference>https://github.com/gopherchina/conference</a></li></ul></li><li>dotGo，举办地在欧洲，每年3月份，官网为 <a href=https://www.dotgo.eu/>https://www.dotgo.eu/</a></li><li>详细的会议列表可查看 <a href=https://github.com/golang/go/wiki/Conferences>https://github.com/golang/go/wiki/Conferences</a></li></ul><p>Go下载和相关的文档、标准库等本来都应该在官网 <a href=https://golang.org/>https://golang.org/</a> 查看，但国内由于某些原因无法访问，可以访问国内的镜像网站 <a href=http://docscn.studygolang.com/>http://docscn.studygolang.com/</a> 。该镜像网站由Go语言中文网维护，同时，<a href=https://studygolang.com/ target=_blank>Go语言中文网</a>
也是国内的活跃社区，每周还会发行一份<a href=https://studygolang.com/go/weekly target=_blank>Go语言爱好者周刊</a></p><p>Go相关资料聚集最多的还是<a href=https://github.com/golang/go/wiki/Articles target=_blank>go wiki</a></p><h2 id=3-下载安装>3. 下载安装</h2><p>go语言环境搭建是一切操作的基础，windowns下快速安装可以使用 chocolatey ，执行如下命令即可</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=n>choco</span> <span class=n>install</span> <span class=n>golang</span>
</code></pre></td></tr></table></div></div><p>安装完甚至不需要自己配置环境变量，重启终端执行<code>go version</code>命令即可证明安装成功。后面的内容就开始介绍正常的安装方法，以win10和Ubuntu为例介绍windows和linux下的安装与环境配置。</p><h3 id=31-下载>3.1 下载</h3><p>打开Golang中国官网 <a href=https://golang.google.cn/ target=_blank>golang.org</a></p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/70707293-ca5e0e80-1d12-11ea-9a68-4fc4013db2eb.png alt=golang中国区官网 class=lazyload><figcaption class=image-caption>golang中国区官网</figcaption></figure></p><p>点击首页的<code>Download Go</code>按钮，将跳转到<a href=https://golang.google.cn/dl/ target=_blank>golang.org/dl</a>
页面，在该页面Golang为windows，macOS和Linux三种环境都提供了安装包，还提供了源码的打包文件。这里不介绍macOS的安装，因为没有使用经验。</p><p>目前的最新版本是本月刚发布的Go1.13</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/70707305-d0ec8600-1d12-11ea-9b23-3b9afe8f62e9.png alt=golang下载页面 class=lazyload><figcaption class=image-caption>golang下载页面</figcaption></figure></p><p>windows默认下载文件为<code>go1.13.windows-amd64.msi</code>，双击启动即可安装，默认安装位置为<code>C:\Go</code>，并将自动设置环境变量。如果下载了以<code>.zip</code>为后缀的版本，则需要自己解压到合适的路径，并自己设置环境变量。</p><p>Linux默认下载文件为<code>go1.13.linux-amd64.tar.gz</code>，将其解压缩到<code>/usr/local</code>，同时需要手动将<code>/usr/local/go/bin</code>添加到PATH环境变量中。</p><p>windows和Linux都同时提供了32位和64位的安装版本，除此外，Linux还有一种针对ARM架构的版本，也存在针对一些特殊架构的版本。</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/70707336-e19cfc00-1d12-11ea-9707-9433114d77a3.png alt=golang安装版本 class=lazyload><figcaption class=image-caption>golang安装版本</figcaption></figure></p><h3 id=32-安装和配置环境变量>3.2 安装和配置环境变量</h3><h4 id=windows>windows</h4><p>一般选择<code>msi</code>后缀的安装版本，双击即可安装，环境变量将会自动设置完成，打开powershell，使用<code>go env</code>命令查看环境变量</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span><span class=lnt>32
</span><span class=lnt>33
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=n>go</span> <span class=n>env</span>
<span class=nb>set </span><span class=n>GO111MODULE</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOARCH</span><span class=p>=</span><span class=n>amd64</span>
<span class=nb>set </span><span class=n>GOBIN</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOCACHE</span><span class=p>=</span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>AppData</span><span class=p>\</span><span class=n>Local</span><span class=p>\</span><span class=n>go</span><span class=n>-build</span>
<span class=nb>set </span><span class=n>GOENV</span><span class=p>=</span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>AppData</span><span class=p>\</span><span class=n>Roaming</span><span class=p>\</span><span class=n>go</span><span class=p>\</span><span class=n>env</span>
<span class=nb>set </span><span class=n>GOEXE</span><span class=p>=</span><span class=p>.</span><span class=n>exe</span>
<span class=nb>set </span><span class=n>GOFLAGS</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOHOSTARCH</span><span class=p>=</span><span class=n>amd64</span>
<span class=nb>set </span><span class=n>GOHOSTOS</span><span class=p>=</span><span class=n>windows</span>
<span class=nb>set </span><span class=n>GONOPROXY</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GONOSUMDB</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOOS</span><span class=p>=</span><span class=n>windows</span>
<span class=nb>set </span><span class=n>GOPATH</span><span class=p>=</span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>go</span>
<span class=nb>set </span><span class=n>GOPRIVATE</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOPROXY</span><span class=p>=</span><span class=n>https</span><span class=err>:</span><span class=p>/</span><span class=p>/</span><span class=n>proxy</span><span class=p>.</span><span class=n>golang</span><span class=p>.</span><span class=n>org</span><span class=p>,</span><span class=n>direct</span>
<span class=nb>set </span><span class=n>GOROOT</span><span class=p>=</span><span class=n>c:</span><span class=p>\</span><span class=n>go</span>
<span class=nb>set </span><span class=n>GOSUMDB</span><span class=p>=</span><span class=n>sum</span><span class=p>.</span><span class=n>golang</span><span class=p>.</span><span class=n>org</span>
<span class=nb>set </span><span class=n>GOTMPDIR</span><span class=p>=</span>
<span class=nb>set </span><span class=n>GOTOOLDIR</span><span class=p>=</span><span class=n>c:</span><span class=p>\</span><span class=n>go</span><span class=p>\</span><span class=n>pkg</span><span class=p>\</span><span class=n>tool</span><span class=p>\</span><span class=n>windows_amd64</span>
<span class=nb>set </span><span class=n>GCCGO</span><span class=p>=</span><span class=n>gccgo</span>
<span class=nb>set </span><span class=n>AR</span><span class=p>=</span><span class=n>ar</span>
<span class=nb>set </span><span class=n>CC</span><span class=p>=</span><span class=n>gcc</span>
<span class=nb>set </span><span class=n>CXX</span><span class=p>=</span><span class=n>g</span><span class=p>+</span><span class=p>+</span>
<span class=nb>set </span><span class=n>CGO_ENABLED</span><span class=p>=</span><span class=n>1</span>
<span class=nb>set </span><span class=n>GOMOD</span><span class=p>=</span>
<span class=nb>set </span><span class=n>CGO_CFLAGS</span><span class=p>=</span><span class=n>-g</span> <span class=n>-O2</span>
<span class=nb>set </span><span class=n>CGO_CPPFLAGS</span><span class=p>=</span>
<span class=nb>set </span><span class=n>CGO_CXXFLAGS</span><span class=p>=</span><span class=n>-g</span> <span class=n>-O2</span>
<span class=nb>set </span><span class=n>CGO_FFLAGS</span><span class=p>=</span><span class=n>-g</span> <span class=n>-O2</span>
<span class=nb>set </span><span class=n>CGO_LDFLAGS</span><span class=p>=</span><span class=n>-g</span> <span class=n>-O2</span>
<span class=nb>set </span><span class=n>PKG_CONFIG</span><span class=p>=</span><span class=n>pkg</span><span class=n>-config</span>
<span class=nb>set </span><span class=n>GOGCCFLAGS</span><span class=p>=</span><span class=n>-m64</span> <span class=n>-mthreads</span> <span class=n>-fno</span><span class=n>-caret</span><span class=n>-diagnostics</span> <span class=n>-Qunused</span><span class=n>-arguments</span> <span class=n>-fmessage</span><span class=n>-length</span><span class=p>=</span><span class=n>0</span> <span class=n>-fdebug</span><span class=n>-prefix</span><span class=n>-map</span><span class=p>=</span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>AppData</span><span class=p>\</span><span class=n>Local</span><span class=p>\</span><span class=n>Temp</span><span class=p>\</span><span class=n>go</span><span class=n>-build821698526</span><span class=p>=</span><span class=p>/</span><span class=n>tmp</span><span class=p>/</span><span class=n>go</span><span class=n>-build</span> <span class=n>-gno</span><span class=n>-record</span><span class=n>-gcc</span><span class=n>-switches</span>
</code></pre></td></tr></table></div></div><p>我们需要关心的唯一一个环境变量是GOPATH，可以看到，默认的GOPATH是<code>c:\Users\lylw1\go</code>，其中<code>lylw1</code>是自己的用户名。</p><p>GOPATH所代表的路径是go的工作区，可以任意选择任意自己喜欢的文件夹作为go的工作区，如果不想使用默认的路径，需要自己进行修改，最简单的修改方式为使用<code>setx</code>命令，更多的环境变量修改方式可以查看<a href=https://github.com/golang/go/wiki/SettingGOPATH#windows target=_blank>Setting GOPATH</a>
，需要注意的一点是GOPATH不能设置为Go的安装目录<code>C:\go</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=n>setx</span> <span class=n>GOPATH</span> <span class=n>d:</span><span class=p>\</span><span class=n>go</span>
</code></pre></td></tr></table></div></div><p>go的版本号使用<code>go version</code>命令查看</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=p>&gt;</span> <span class=k>go</span> <span class=nx>version</span>
<span class=k>go</span> <span class=nx>version</span> <span class=nx>go1</span><span class=mf>.13</span><span class=mf>.4</span> <span class=nx>windows</span><span class=o>/</span><span class=nx>amd64</span>
</code></pre></td></tr></table></div></div><h4 id=linux>Linux</h4><p>主要以Ubuntu为例，操作系统版本位Ubuntu18.04 LTS。首先在<a href=https://golang.org/dl/ target=_blank>golang.org/dl</a>
页面右击要下载的版本获取下载链接，使用wget下载文件。直接下载同样可以。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ wget https://dl.google.com/go/go1.13.linux-amd64.tar.gz
</code></pre></td></tr></table></div></div><p>将文件解压缩到指定目录/usr/local，<code>-C</code>参数用于指定目标文件夹，解压缩后删除压缩文件。</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo tar -xzf go1.13.linux-amd64.tar.gz -C /usr/local
$ rm go1.13.linux-amd64.tar.gz
</code></pre></td></tr></table></div></div><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/64866217-9751a380-d66d-11e9-93de-6dc821dc9657.png alt=解压后的golang文件 class=lazyload><figcaption class=image-caption>解压后的golang文件</figcaption></figure></p><p>设置环境变量</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ sudo nano /etc/profile
<span class=c1># 在打开的文件末尾添加下列语句</span>
<span class=nb>export</span> <span class=nv>PATH</span><span class=o>=</span><span class=nv>$PATH</span>:/usr/local/go/bin
</code></pre></td></tr></table></div></div><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/64866240-a0db0b80-d66d-11e9-946d-c693013d6dd0.png alt=Linux环境变量设置 class=lazyload><figcaption class=image-caption>Linux环境变量设置</figcaption></figure></p><p>更新的环境变量可以通过下面的命令使其直接生效</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ <span class=nb>source</span> /etc/profile
<span class=c1># 查看生效后的环境变量设置</span>
$ go version
go version go1.13 linux/amd64
</code></pre></td></tr></table></div></div><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/64866250-a9334680-d66d-11e9-98a5-330da8ca8920.png alt="linux go环境变量查看" class=lazyload><figcaption class=image-caption>linux go环境变量查看</figcaption></figure></p><p>上述命令只能暂时使go可用，正式生效需重启系统。</p><p>注：将环境变量添加到/etc/profile可使go全局启用，也可添加到$HOME/.profile，对当前登录用户起作用。</p><p><em>注：可以适用apt-get命令安装，但安装的go不会是最新版本，同样，也可以使用snap安装，可以安装最新版本。</em></p><h3 id=33-环境变量说明>3.3 环境变量说明</h3><p>常规的使用除了GOPATH外无需关心其它环境变量，但在进行交叉编译时，需要进行一定的设置，详细的环境变量说明可以查看<a href=https://golang.org/doc/install/source#gopath target=_blank>$GOPATH environment variable set correctly</a>
，以下解释几个主要的环境变量。</p><ul><li><code>GOOS</code>与<code>GOARCH</code>：目标操作系统和处理器架构，</li><li><code>GOHOSTOS</code>和<code>GOHOSTARCH</code>是宿主机操作系统和处理器架构。</li></ul><p>以上四个环境变量一般是编译时使用的。</p><ul><li><p><code>GOBIN</code>：编译器和链接器的安装位置，默认是<code>$GOROOT/bin</code>，一般将其设置为空值，Go会使用默认值。</p></li><li><p><code>GOROOT</code>：电脑上安装的Go的根目录，Linux下一般为<code>$HOME/go</code>，windows下为<code>C:\go</code></p></li></ul><p>下面对<code>GOPATH</code>作进一步的说明。go install、go tool和go get命令默认路径都是<code>GOPATH</code>，作为编译后二进制文件的存放目的地、import包时的搜索路径以及下载后包的存放路径，如</p><ul><li><code>$GOPATH/src/A/B</code>编译后二进制包放在<code>$GOPATH/bin/B</code>目录下。</li><li>导入包<code>X/Y/Z</code>会到<code>$GOPATH/pkg/$GOOS_$GOARCH/X/Y/Z.a</code>下寻找二进制包，到<code>$GOPATH/src/X/Y/Z</code>下寻找源码包。</li><li><code>go get github.com/go-kit/kit</code>命令，会将远程包克隆到<code>$GOPATH/src/github.com/go-kit/kit</code></li></ul><p><code>GOPATH</code>可以是一个路径列表，也就是说在多个目录下编写go代码不会出问题，但是这种做法不被官方建议，即使拥有多个工作目录，包的导入与搜索也总是在第一个路径下。</p><h3 id=34-代码目录结构>3.4 代码目录结构</h3><p>go中对代码目录结构的说明是</p><ol><li>所有的Go代码在一个工作区</li><li>一个工作区包含多个版本控制仓库</li><li>每个仓库包含一个或多个包</li><li>每个包是一个文件夹，通常不含子文件夹，里面有一个或多个Go源码文件</li></ol><p>以上提到的<code>工作区</code>、<code>版本控制仓库</code>、<code>包</code>都是一个个文件夹，工作区的根目录下初始拥有两个文件夹：</p><ul><li><code>src</code>包含Go源码</li><li><code>bin</code>包含Go的可执行命令文件，如<code>gofmt.exe</code></li></ul><p>go工具链会将二进制包编译和安装到<code>bin</code>目录下，<code>src</code>的子目录则是一个个版本控制仓库，比如git。下面是一个工作区的目录示例：</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>bin/
    hello                          <span class=c1># command executable</span>
    outyet                         <span class=c1># command executable</span>
src/
    github.com/golang/example/
    	.git/                      <span class=c1># Git repository metadata</span>
		hello/
	    	hello.go               <span class=c1># command source</span>
		outyet/
	    	main.go                <span class=c1># command source</span>
	    	main_test.go           <span class=c1># test source</span>
		stringutil/
	    	reverse.go             <span class=c1># package source</span>
	    	reverse_test.go        <span class=c1># test source</span>
    golang.org/x/image/
        .git/                      <span class=c1># Git repository metadata</span>
		bmp/
	    	reader.go              <span class=c1># package source</span>
	    	writer.go              <span class=c1># package source</span>
    ... <span class=o>(</span>many more repositories and packages omitted<span class=o>)</span> ...
</code></pre></td></tr></table></div></div><p>上面的示例中一共包含两个仓库：<code>example</code>和<code>image</code>，前者是github的仓库，后者是golang本身的仓库。<code>example</code>仓库中包含两个命令(<code>hello</code>和<code>outyet</code>)和一个库(<code>stringutil</code>)，<code>image</code>仓库中包含<code>bmp</code>包以及一些<a href=https://godoc.org/golang.org/x/image target=_blank>其它的东西</a></p><p>一个典型的Go工作区会包含多个仓库，每个仓库包含多个命令和包。</p><h3 id=35-安装目录清单>3.5 安装目录清单</h3><p>安装完成的Go根目录（$GOROOT）文件夹结构除了README.md，AUTHORS，LICENSE等常规文件外，基本结构应如下所示：</p><ul><li><code>/bin</code>：包含可执行文件，如：编译器，Go 工具</li><li><code>/doc</code>：包含示例程序，代码工具，本地文档等</li><li><code>/lib</code>：包含文档模版</li><li><code>/misc</code>：包含与支持 Go 编辑器有关的配置文件以及 cgo 的示例</li><li><code>/pkg/os_arch</code>：包含标准库的包的对象文件（<code>.a</code>）</li><li><code>/src</code>：包含源代码构建脚本和标准库的包的完整源代码（Go 是一门开源语言）</li><li><code>/src/cmd</code>：包含 Go 和 C 的编译器和命令行脚本</li></ul><p>这是之前的介绍，网上搜到的多是这个说明，但当前还多了<code>api</code>和<code>test</code>两个文件夹。</p><h2 id=4-第一个程序>4. 第一个程序</h2><p>编辑并运行我们的第一个程序，按照编程界的惯例，输出<code>hello, world!</code>。</p><p>首先在工作区创建相应的包目录，注意下面的<code>$GOPATH</code>只是指代Go的工作区，windows下这样输入命令是无法执行的，需要替换为实际的路径</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>$</span> <span class=n>mkdir</span> <span class=nv>$GOPATH</span><span class=p>/</span><span class=n>src</span><span class=p>/</span><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>hello</span>
</code></pre></td></tr></table></div></div><p>然后在该目录下创建<code>hello.go</code>文件，使其包含如下代码</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=s>&#34;fmt&#34;</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=s>&#34;Hello, world.&#34;</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>使用<code>go install</code>命令编译安装该包</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=n>go</span> <span class=n>install</span> <span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>hello</span>
</code></pre></td></tr></table></div></div><p>上面的命令会进入GOPATH目录寻找<code>github.com/shuzang/hello</code>包然后编译安装，也可以进入包目录下直接执行<code>go install</code></p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=nb>cd </span><span class=nv>$GOPATH</span><span class=p>/</span><span class=n>src</span><span class=p>/</span><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>hello</span>
<span class=p>&gt;</span> <span class=n>go</span> <span class=n>install</span>
</code></pre></td></tr></table></div></div><p>该命令编译并生成可执行文件，放在工作区的<code>bin</code>目录下，windows下文件名为<code>hello.exe</code>，编译好的二进制文件已经放在了<code>bin</code>目录下，以完整路径运行该程序</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=nb>PS </span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>go</span><span class=p>&gt;</span> <span class=p>.</span><span class=p>/</span><span class=n>bin</span><span class=p>/</span><span class=n>hello</span>
<span class=n>Hello</span><span class=p>,</span> <span class=n>world</span><span class=p>!</span>
</code></pre></td></tr></table></div></div><p>也可以将<code>$GOPATH/bin</code>添加到电脑的<code>PATH</code>环境变量中，这样可以直接执行</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=nb>PS </span><span class=n>C:</span><span class=p>\</span><span class=n>Users</span><span class=p>\</span><span class=n>lylw1</span><span class=p>\</span><span class=n>go</span><span class=p>&gt;</span> <span class=n>hello</span>
<span class=n>Hello</span><span class=p>,</span> <span class=n>world</span><span class=p>!</span>
</code></pre></td></tr></table></div></div><p>可能是因为我使用chocolatey安装的原因，这一环境变量也已经自动设好了，所以我可以直接执行命令。</p><p>完成编辑后，就可以使用版本控制工具初始化仓库并上传代码了，示例如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>$</span> <span class=nb>cd </span><span class=nv>$GOPATH</span><span class=p>/</span><span class=n>src</span><span class=p>/</span><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>hello</span>
<span class=p>$</span> <span class=n>git</span> <span class=n>init</span>
<span class=n>Initialized</span> <span class=n>empty</span> <span class=n>Git</span> <span class=n>repository</span> <span class=k>in</span> <span class=n>C:</span><span class=p>/</span><span class=n>Users</span><span class=p>/</span><span class=n>lylw1</span><span class=p>/</span><span class=n>go</span><span class=p>/</span><span class=n>src</span><span class=p>/</span><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>hello</span><span class=p>/</span><span class=p>.</span><span class=n>git</span><span class=p>/</span>
<span class=p>$</span> <span class=n>git</span> <span class=n>add</span> <span class=n>hello</span><span class=p>.</span><span class=n>go</span>
<span class=p>$</span> <span class=n>git</span> <span class=n>commit</span> <span class=n>-m</span> <span class=s2>&#34;</span><span class=s2>initial commit</span><span class=s2>&#34;</span>
<span class=p>[</span><span class=n>master</span> <span class=p>(</span><span class=n>root</span><span class=n>-commit</span><span class=p>)</span> <span class=n>0b4507d</span><span class=p>]</span> <span class=n>initial</span> <span class=n>commit</span>
 <span class=n>1</span> <span class=n>file</span> <span class=n>changed</span><span class=p>,</span> <span class=n>7</span> <span class=n>insertion</span><span class=p>(</span><span class=p>+</span><span class=p>)</span>
 <span class=n>create</span> <span class=n>mode</span> <span class=n>100644</span> <span class=n>hello</span><span class=p>.</span><span class=n>go</span>
</code></pre></td></tr></table></div></div><h2 id=5-第一个库>5. 第一个库</h2><p>现在来写一个用于<code>hello</code>程序的库</p><p>首先依然是选择合适的路径创建包文件夹</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=n>mkdir</span> <span class=nv>$GOPATH</span><span class=p>/</span><span class=n>src</span><span class=p>/</span><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>stringutil</span>
</code></pre></td></tr></table></div></div><p>在该文件夹下创建<code>reverse.go</code>文件，使其包含以下代码</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=c1>// Package stringutil contains utility functions for working with strings.
</span><span class=c1></span><span class=kn>package</span> <span class=nx>stringutil</span>

<span class=c1>// Reverse returns its argument string reversed rune-wise left to right.
</span><span class=c1></span><span class=kd>func</span> <span class=nf>Reverse</span><span class=p>(</span><span class=nx>s</span> <span class=kt>string</span><span class=p>)</span> <span class=kt>string</span> <span class=p>{</span>
	<span class=nx>r</span> <span class=o>:=</span> <span class=p>[</span><span class=p>]</span><span class=nb>rune</span><span class=p>(</span><span class=nx>s</span><span class=p>)</span>
	<span class=k>for</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=o>:=</span> <span class=mi>0</span><span class=p>,</span> <span class=nb>len</span><span class=p>(</span><span class=nx>r</span><span class=p>)</span><span class=o>-</span><span class=mi>1</span><span class=p>;</span> <span class=nx>i</span> <span class=p>&lt;</span> <span class=nb>len</span><span class=p>(</span><span class=nx>r</span><span class=p>)</span><span class=o>/</span><span class=mi>2</span><span class=p>;</span> <span class=nx>i</span><span class=p>,</span> <span class=nx>j</span> <span class=p>=</span> <span class=nx>i</span><span class=o>+</span><span class=mi>1</span><span class=p>,</span> <span class=nx>j</span><span class=o>-</span><span class=mi>1</span> <span class=p>{</span>
		<span class=nx>r</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span><span class=p>,</span> <span class=nx>r</span><span class=p>[</span><span class=nx>j</span><span class=p>]</span> <span class=p>=</span> <span class=nx>r</span><span class=p>[</span><span class=nx>j</span><span class=p>]</span><span class=p>,</span> <span class=nx>r</span><span class=p>[</span><span class=nx>i</span><span class=p>]</span>
	<span class=p>}</span>
	<span class=k>return</span> <span class=nb>string</span><span class=p>(</span><span class=nx>r</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>然后使用<code>go build</code>编译</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=n>go</span> <span class=n>build</span> <span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>stringutil</span>
</code></pre></td></tr></table></div></div><p>如果位于<code>stringutil</code>包的根目录，也可以不用路径</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=nb>cd </span><span class=nv>$GOPATH</span><span class=p>/</span><span class=n>src</span><span class=p>/</span><span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>stringutil</span>
<span class=p>&gt;</span> <span class=n>go</span> <span class=n>build</span>
</code></pre></td></tr></table></div></div><p><code>go build</code>的作用仅仅是编译，不包括安装，因此不会生成任何输出文件，编译后的结果仅位于本地缓存。</p><p>确认编译完成后，修改<code>hello.go</code>文件，引入<code>stringutil</code>包</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=p>(</span>
	<span class=s>&#34;fmt&#34;</span>

	<span class=s>&#34;github.com/shuzang/stringutil&#34;</span>
<span class=p>)</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>(</span><span class=p>)</span> <span class=p>{</span>
	<span class=nx>fmt</span><span class=p>.</span><span class=nf>Println</span><span class=p>(</span><span class=nx>stringutil</span><span class=p>.</span><span class=nf>Reverse</span><span class=p>(</span><span class=s>&#34;!oG ,olleH&#34;</span><span class=p>)</span><span class=p>)</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>然后使用<code>go install</code>编译安装，最后执行查看结果</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=p>&gt;</span> <span class=n>go</span> <span class=n>install</span> <span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>shuzang</span><span class=p>/</span><span class=n>hello</span>
<span class=p>&gt;</span> <span class=n>hello</span>
<span class=n>Hello</span><span class=p>,</span> <span class=n>Go</span><span class=p>!</span>
</code></pre></td></tr></table></div></div><p>以上步骤结束后，工作区的目录应该如下所示</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-powershell data-lang=powershell><span class=n>bin</span><span class=p>/</span>
    <span class=n>hello</span>                 <span class=c># command executable</span>
<span class=n>src</span><span class=p>/</span>
    <span class=n>github</span><span class=p>.</span><span class=n>com</span><span class=p>/</span><span class=n>user</span><span class=p>/</span>
        <span class=n>hello</span><span class=p>/</span>
            <span class=n>hello</span><span class=p>.</span><span class=n>go</span>      <span class=c># command source</span>
        <span class=n>stringutil</span><span class=p>/</span>
            <span class=n>reverse</span><span class=p>.</span><span class=n>go</span>    <span class=c># package source</span>
</code></pre></td></tr></table></div></div><h2 id=6-编辑器ide和其它工具>6. 编辑器、IDE和其它工具</h2><h3 id=61-概述>6.1 概述</h3><p>对开发工具的需求一般包括</p><ol><li>语法高亮，注释，代码补全提示，自动保存，显示代码所在的行数，括号匹配</li><li>方便的项目文件管理，可以同时编辑多个源文件，读取保持最近的文件或项目</li><li>能够跳转到某个函数或类型的定义部分。</li><li>完美的查找和替换功能，替换之前最好还能预览结果。</li><li>当有编译错误时，双击错误提示可以跳转到发生错误的位置，可以进行断点调试</li><li>跨平台，免费，开源</li><li>能够通过插件架构来轻易扩展和替换某个功能</li><li>构建出的程序需要能够通过命令行或 IDE 内部的控制台运行</li><li>内置 Go 的相关工具</li><li>能够导出不同格式的代码文件，如：PDF，HTML 或格式化后的代码</li><li>集成像 git 这样的版本控制工具</li><li>&mldr;</li></ol><p>以这些要求寻找，列举工具如下：</p><ol><li>VScode</li><li>Goland</li><li>LiteIDE</li><li>vim-go</li><li>Atom</li></ol><p>我当前用的是VScode，网上对Goland评价很高，其它的就随意了，也有不少直接用普通编辑器配合Go自带的工具使用的，实际上vscode和vim就属于这种</p><p>完整的IDE和插件列表可以查看</p><ul><li><a href=https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins>https://github.com/golang/go/wiki/IDEsAndTextEditorPlugins</a></li></ul><h3 id=62-vscode>6.2 VScode</h3><p>VScode中的Go扩展提供了大量的特性，如自动补全、悬停信息显示、括号匹配等，下面进行具体介绍，在VScode软件内的插件商店直接搜索<code>Go</code>安装即可，详细的特性说明查看<a href=https://code.visualstudio.com/docs/languages/go target=_blank>官网</a>
。</p><h4 id=go工具链>Go工具链</h4><p>微软在开发 VS Code 过程中, 定义一种协议, <a href="https://link.zhihu.com/?target=https%3A//microsoft.github.io/language-server-protocol/" target=_blank>语言服务器协议</a>
，用来为每种语言提供诸如自动完成，代码提示等功能。gopls就是Go语言的服务器, 安装命令为</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>$ go get -v golang.org/x/tools/gopls
</code></pre></td></tr></table></div></div><p>不过VScode会在右下角弹出提示，只要直接点击<code>Install</code>即可，不需要自己输入命令。同时，因为没有设置go.toolsGopath，默认使用了gopath作为安装路径</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>go.toolsGopath setting is not set. Using GOPATH C:<span class=se>\U</span>sers<span class=se>\l</span>ylw1<span class=se>\g</span>o
Installing <span class=m>1</span> tool at C:<span class=se>\U</span>sers<span class=se>\l</span>ylw1<span class=se>\g</span>o<span class=se>\b</span>in in module mode.
  gopls

Installing golang.org/x/tools/gopls SUCCEEDED

Reload VS Code window to use the Go language server
All tools successfully installed. You<span class=err>&#39;</span>re ready to Go :<span class=o>)</span>.

</code></pre></td></tr></table></div></div><p>Go代码的调试还需要delve工具</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-go data-lang=go><span class=err>$</span> <span class=k>go</span> <span class=nx>get</span> <span class=o>-</span><span class=nx>v</span> <span class=nx>github</span><span class=p>.</span><span class=nx>com</span><span class=o>/</span><span class=k>go</span><span class=o>-</span><span class=nx>delve</span><span class=o>/</span><span class=nx>delve</span><span class=o>/</span><span class=nx>cmd</span><span class=o>/</span><span class=nx>dlv</span>
</code></pre></td></tr></table></div></div><p>除此之外，还有一批需要安装的分析工具，如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash><span class=c1># Below tools are needed for the basic features of the Go extension.</span>
gocode
gopkgs
go-outline
gocode-gomod
godef
goreturns
golint
</code></pre></td></tr></table></div></div><p>所有这些工具只需要在右下角弹出提示后点击<code>Install</code>即可</p><p>不过上述提到的很多插件不翻墙都无法下载，可以自己手动到github下载然后解压到<code>GOPATH/src</code>，建立起对应的目录结构，然后运行<code>go install</code>将其安装</p><h4 id=用户和工作区设置>用户和工作区设置</h4><p>使用VScode需要关心的一个重要部分是用户和工作区设置，几乎所有的事情都和它们有关。</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://code.visualstudio.com/assets/docs/getstarted/settings/hero.png alt class=lazyload></figure></p><p>这是两种不同的设置范围</p><ul><li>用户设置：是一个全局的设置，适用于打开的任何VScode窗口</li><li>工作区设置：如题，项目工作区的设置，只适用于对应的工作区</li></ul><p>工作区的设置会覆盖掉用户设置，它针对具体的项目，配置文件位于项目根目录<code>.vscode</code>文件夹，可与其它开发者共享。<code>.vscode</code>文件夹还用于存放调试配置和任务配置。</p><p>点击左下角的齿轮，选择<code>设置</code>，默认的设置界面如上，是一个可视化的界面，不过也可以使用<code>settings.json</code>配置文件</p><ul><li>用户设置文件在windows中位于<code>%APPDATA%\Code\User\settings.json</code></li><li>工作区设置文件位于根目录的<code>.vscode</code>文件夹中</li></ul><p>最后，VScode大量的操作都可以通过命令完成，使用快捷键<code>Ctrl+Shift+P</code>可以打开命令输入框。</p><h4 id=特性说明>特性说明</h4><p>在用户或工作区设置中，将 <code>go.autocompleteUnimportedPackages</code> 设为<code>true</code> ，可以在代码中点击包名跳转查看包的具体内容。</p><p>鼠标悬停在变量、函数和结构体的名称上方可以查看它们的签名等信息，这一功能由前面安装的<code>godef</code>工具实现，同样可完成这一功能的工具还有<code>godoc</code>和<code>gogetdoc</code>，通过在用户或工作区设置中调整<code>go.docsTool</code>来切换工具。</p><p>代码导航功能无需设置默认实现。</p><p>对源码的保存操作会自动触发格式化、编译和代码质量检查。格式化工具为<code>gofmt</code>，可选的替代工具有<code>goreturns</code>和<code>goimports</code>，在用户或工作区设置中调整<code>go.formatTool</code>来设置。编译的过程使用<code>go build</code>命令。代码质量检查的工具为<code>golint</code>，也可以使用<code>gometalinter</code>，用来检查代码的规范性，检查得到的<code>errors</code>和<code>warning</code>会在编辑器里以红色/绿色波浪线标出来，下面的输出窗口也会显示详细信息。</p><p>所有可选的替代工具都需要自己安装，使用快捷键打开命令面板，输入 <code>Go: Install/Update Tools </code>，选择要安装的工具，点击确定即可。</p><h4 id=重命名符号>重命名符号</h4><p>普通情况重命名一般使用替换功能，实际上有更为简单的方式：选中要重命名的符号，按快捷键<code>F2</code>即可</p><h4 id=调试>调试</h4><p>调试使用的是前面安装的<code>delve</code>工具。在VScode中，按<code>F5</code>启动调试，一般情况下使用默认的调试配置即可，不过还是应当对调试配置选项有一定的了解。</p><p>默认是没有调试配置文件的，当我们需要进行配置时，输入命令 <code>Debug: Open launch.json </code>，第一次会在工作区根目录的<code>.vscode</code>文件夹中创建<code>launch.json</code>文件，文件中默认的配置信息如下</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-json data-lang=json><span class=p>{</span>
    <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;0.2.0&#34;</span><span class=p>,</span>
    <span class=nt>&#34;configurations&#34;</span><span class=p>:</span> <span class=p>[</span>
        <span class=p>{</span>
            <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=s2>&#34;Launch&#34;</span><span class=p>,</span>
            <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;go&#34;</span><span class=p>,</span>
            <span class=nt>&#34;request&#34;</span><span class=p>:</span> <span class=s2>&#34;launch&#34;</span><span class=p>,</span>
            <span class=nt>&#34;mode&#34;</span><span class=p>:</span> <span class=s2>&#34;auto&#34;</span><span class=p>,</span>
            <span class=nt>&#34;program&#34;</span><span class=p>:</span> <span class=s2>&#34;${fileDirname}&#34;</span><span class=p>,</span>
            <span class=nt>&#34;env&#34;</span><span class=p>:</span> <span class=p>{</span><span class=p>}</span><span class=p>,</span>
            <span class=nt>&#34;args&#34;</span><span class=p>:</span> <span class=p>[</span><span class=p>]</span>
        <span class=p>}</span>
    <span class=p>]</span>
<span class=p>}</span>
</code></pre></td></tr></table></div></div><p>可设置的配置属性可查看<a href=https://github.com/Microsoft/vscode-go/wiki/Debugging-Go-code-using-VS-Code target=_blank>Debugging Go code using VS Code</a>
，更多关于VScode中Go调试的相关信息都可查看该文档。</p><p>这里需要注意的是<code>args</code>，调试时程序需要传入的参数数组是该配置参数的值</p><h4 id=运行>运行</h4><p>快捷键<code>Ctrl+F5</code>用来运行程序，和调试使用的是同一个配置文件。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>The article was updated on 2019-09-13</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share></div></div></div><div class=post-info-more><section><span class=tag><a href=https://shuzang.top/tags/golang/><i class="fas fa-tag fa-fw"></i>&nbsp;Golang</a>&nbsp;</span></section><section><span><a href=javascript:window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=https://shuzang.top>Home</a></span></section></div><div class=post-nav><a href=https://shuzang.top/2019/09/%E5%9F%BA%E4%BA%8Equorum%E6%90%AD%E5%BB%BA%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6%E5%AE%9E%E9%AA%8C%E5%B9%B3%E5%8F%B0%E6%97%A7/ class=prev rel=prev title=基于quorum搭建访问控制实验平台(旧)><i class="fas fa-angle-left fa-fw"></i>基于quorum搭建访问控制实验平台(旧)</a>
<a href=https://shuzang.top/scaleless-net-light-tower/ class=next rel=next title=白塔，弥陀寺及碧霞宫>白塔，弥陀寺及碧霞宫<i class="fas fa-angle-right fa-fw"></i></a></div></div><div class=comment></div></article></div></main><footer class=footer><div class=copyright><div class=copyright-line>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreffer">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="external nofollow noopener noreffer">LoveIt<i class="far fa-heart fa-fw"></i></a></div><div class=copyright-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://shuzang.top target=_blank>shuzang</a></span></div></div></footer></div><a href=# class="dynamic-to-top animated faster" id=dynamic-to-top><span>&nbsp;</span>
</a><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:true},{left:"\\(",right:"\\)",display:false},{left:"\\[",right:"\\]",display:true},]});});</script><link rel=stylesheet href=/css/lib/katex/katex.min.css><script src=/js/lib/lazysizes/lazysizes.min.js></script><script src=/js/lib/smooth-scroll/smooth-scroll.polyfills.min.js></script><script src=/js/lib/katex/katex.min.js></script><script src=/js/lib/katex/auto-render.min.js></script><script src=/js/lib/katex/mhchem.min.js></script><script src=/js/theme.min.js></script></body></html>