<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge,chrome=1"><title>Analysis of the Communication Traffic for Blockchain Synchronization of IoT Devices | Shuzang's Blog</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta name=Description content="shuzang's personal blog"><link rel=prev href=https://shuzang.top/2018/12/%E6%89%80%E7%BD%97%E9%97%A8%E4%B9%8B%E5%8C%99%E7%9A%84%E5%90%AF%E7%A4%BA/><link rel=next href=https://shuzang.top/blockchain-for-iot/><link rel=canonical href=https://shuzang.top/2018/12/analysis-of-the-communication-traffic-for-blockchain-synchronization-of-iot-devices/><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><meta name=msapplication-TileColor content="#da532c"><meta name=theme-color content="#ffffff"><meta name=twitter:card content="summary"><meta name=twitter:title content="Analysis of the Communication Traffic for Blockchain Synchronization of IoT Devices"><meta name=twitter:description content="摘要
区块链技术能够支持物联网中大量设备的交易和智能合约的执行。区块链状态由链中出块节点（validator nodes）验证与维护，而物联网设备受限于其低算力，低功耗，无线连接的低带宽，需要连接到出块节点来观察和修改链状态，这就需要将出块节点维护的链状态同步到本地。这篇文章就是提出了两个同步协议并对其进行分析，同时作者自己介绍的这是第一个建模分析区块链驱动的物联网系统中无线连接角色的工作。"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Analysis of the Communication Traffic for Blockchain Synchronization of IoT Devices","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/shuzang.top\/2018\/12\/analysis-of-the-communication-traffic-for-blockchain-synchronization-of-iot-devices\/"},"image":{"@type":"ImageObject","url":"https:\/\/shuzang.top\/cover.png","width":800,"height":600},"genre":"posts","keywords":"论文","wordcount":3268,"url":"https:\/\/shuzang.top\/2018\/12\/analysis-of-the-communication-traffic-for-blockchain-synchronization-of-iot-devices\/","datePublished":"2018-12-10T10:45:00\x2b08:00","dateModified":"2018-12-10T10:45:00\x2b08:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"shuzang","logo":{"@type":"ImageObject","url":"https:\/\/shuzang.top\/logo.png","width":127,"height":40}},"description":""}</script><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/css/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/css/lib/animate/animate.min.css></head><body><script>window.isDark=(window.localStorage&&window.localStorage.getItem('theme'))==='dark';window.isDark&&document.body.classList.add('dark-theme');</script><div class=wrapper><nav class=navbar><div class=navbar-container><div class="navbar-header animated bounceIn"><a href=https://shuzang.top>Shuzang's Blog</a></div><div class=navbar-menu><a class=menu-item href=https://shuzang.top/posts>Posts</a><a class=menu-item href=https://shuzang.top/categories>Categories</a><a class=menu-item href=https://shuzang.top/tags>Tags</a><a class=menu-item href=https://shuzang.top/life>Life</a><a class=menu-item href=https://shuzang.top/about>About</a><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></nav><nav class=navbar-mobile><div class=navbar-container><div class=navbar-header><div class="navbar-header-title animated bounceIn"><a href=https://shuzang.top>Shuzang's Blog</a></div><div class=menu-toggle id=menu-toggle><span></span><span></span><span></span></div></div><div class=navbar-menu id=mobile-menu><a class=menu-item href=https://shuzang.top/posts>Posts</a><a class=menu-item href=https://shuzang.top/categories>Categories</a><a class=menu-item href=https://shuzang.top/tags>Tags</a><a class=menu-item href=https://shuzang.top/life>Life</a><a class=menu-item href=https://shuzang.top/about>About</a><a href=javascript:void(0); class=theme-switch><i class="fas fa-adjust fa-rotate-180 fa-fw" title="Switch Theme"></i></a></div></div></nav><main class=main><div class=container><article class=page><h1 class="post-title animated flipInX">Analysis of the Communication Traffic for Blockchain Synchronization of IoT Devices</h1><div class=post-meta><div class=post-meta-main><a class=author href=https://shuzang.top rel=author target=_blank><i class="fas fa-user-circle fa-fw"></i>shuzang
</a>&nbsp;<span class=post-category>included in&nbsp;<i class="far fa-folder fa-fw"></i><a href=https://shuzang.top/categories/%E7%A0%94%E7%A9%B6%E7%94%9F%E7%9A%84%E5%8C%BA%E5%9D%97%E9%93%BE%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/>研究生的区块链学习之路</a>&nbsp;</span></div><div class=post-meta-other><i class="far fa-calendar-alt fa-fw"></i><time datetime=2018-12-10>2018-12-10</time>&nbsp;
<i class="fas fa-pencil-alt fa-fw"></i>about 3268 words&nbsp;
<i class="far fa-clock fa-fw"></i>7 min&nbsp;</div></div><div class=post-toc id=post-toc><h2 class=post-toc-title>Contents</h2><div class=post-toc-content><nav id=TableOfContents><ul><li><ul><li><a href=#摘要>摘要</a></li><li><a href=#引言>引言</a></li><li><a href=#区块链协议>区块链协议</a></li><li><a href=#系统模型>系统模型</a></li><li><a href=#同步协议>同步协议</a></li><li><a href=#分析>分析</a></li><li><a href=#数值结果>数值结果</a></li><li><a href=#结论>结论</a></li></ul></li></ul></nav></div></div><div class=post-toc-mobile id=post-toc-mobile><details><summary><div class=post-toc-title><span>Contents</span>
<span><i class="details icon fas fa-angle-down"></i></span></div></summary><div class=post-toc-content><nav id=TableOfContentsMobile><ul><li><ul><li><a href=#摘要>摘要</a></li><li><a href=#引言>引言</a></li><li><a href=#区块链协议>区块链协议</a></li><li><a href=#系统模型>系统模型</a></li><li><a href=#同步协议>同步协议</a></li><li><a href=#分析>分析</a></li><li><a href=#数值结果>数值结果</a></li><li><a href=#结论>结论</a></li></ul></li></ul></nav></div></details></div><div class=post-content><a class=post-dummy-target id=摘要></a><h3>摘要</h3><p>区块链技术能够支持物联网中大量设备的交易和智能合约的执行。区块链状态由链中出块节点（validator nodes）验证与维护，而物联网设备受限于其低算力，低功耗，无线连接的低带宽，需要连接到出块节点来观察和修改链状态，这就需要将出块节点维护的链状态同步到本地。这篇文章就是提出了两个同步协议并对其进行分析，同时作者自己介绍的这是第一个建模分析区块链驱动的物联网系统中无线连接角色的工作。</p><a class=post-dummy-target id=引言></a><h3>引言</h3><p>智能合约是区块链在物联网中的应用，然而，由于物联网设备的存储和处理能力限制，智能合约需要存在外部设备上。一个小额交易的信息交换过程如下图所述，区块链网络中的节点存储智能合约和维护区块链。该过程的目的是保证所有的物联网设备看到一个相同的智能合约状态，其关键是每个物联网设备如何与最新的区块链状态保持同步。</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/54514046-033fa180-4994-11e9-9143-b1e79280a088.png alt=小额交易的信息交换20181210111748 class=lazyload><figcaption class=image-caption>小额交易的信息交换20181210111748</figcaption></figure></p><p>这篇文章表征了区块链网络和物联网设备之间的流量。这种情况下，（i）低算力和存储能力使物联网设备无法直接充当区块链网络中的节点，（ii）物联网设备由于节能策略，对区块链网络的访问是分散的，因为其存在休眠状态，同时访问实用的无线链路是低带宽的。作者建立了两个同步协议，分别是全功能节点和轻节点两种情况下物联网设备和区块链网络间的同步。并且提出了一种流量模型，可用于度量感兴趣的特征，例如区块链同步所需的时间，或保持同步的最小带宽要求。主要贡献是无线连接对区块链同步和智能合约执行的显式影响。</p><p>Section II介绍区块链协议，SectionIII 提出系统模型，Section IV 介绍同步协议，Section V 分析同步协议，Section VI 给出数值结果，Section VII 是结论</p><a class=post-dummy-target id=区块链协议></a><h3>区块链协议</h3><p>这部分是用到的区块链中概念的说明</p><a class=post-dummy-target id=系统模型></a><h3>系统模型</h3><p>1）区块链网络：节点间形成的P2P网络，假设出块节点在任意时刻都是诚实的。时刻<strong>t</strong>的链长为<strong>h(t)</strong>，即均匀泊松分布，参数为 λ<sub>b</sub></p><p>2）IoT设备：一个通用的物联网设备<strong>u</strong>，有存储和能耗限制，所以不能自己作为区块链节点，而是接收从区块链网络发过来的信息。同时，设备的关注点在对包含在区块链中的交易的验证，而不是交易创建。交易的验证与创建是分离的，同时，与从区块链接收交易信息相比，向区块链发送交易信息忽略不计。</p><p>为了验证交易，u存储一个区块链的本地副本，本地区块链长h<sub>u</sub>(t) ≤ h(t) ,即本地区块链长度总是小于等于区块链网络中的链长，因为物联网设备自己不生成块。H(t)代表本地和全局的链长之差，这个数值可以描述在时刻t有多少块的延迟，这个延迟是由于物联网设备的休眠造成的。</p><p>设备u通过无线网络连到N≥1个区块链网络节点。u的连接建模为一个两阶段的过程S(t)，在S<sub>0</sub>阶段，u处于连接状态，同步协议由新块创建这一过程触发；在S<sub>1</sub>阶段，u休眠且不接受任何块的更新和执行同步协议。另外，状态S<sub>1</sub>到S<sub>1</sub>的转换也会触发一个持续时间随机的同步，由于通信链路的容量不足，同步协议的执行时间可能长于块生成时间，此时需要多次执行才能完成同步。</p><p>我们对同步协议执行后的H(t)感兴趣，为此，我们定义了X<sub>k</sub>代表离散时间的协议执行后的H(t)，λ<sub>B</sub>=0.1 s<sup>-1</sup>，u在时间间隔t=[29,43)休眠，造成了本地区块链副本两个区块的延迟。区块链的一致性由下一次协议执行实现。块生成过程，物联网设备状态和本地区块链延迟的关系如下图所示</p><p><figure><img src=/svg/loading.min.svg data-sizes=auto data-src=https://user-images.githubusercontent.com/26682846/54514075-16eb0800-4994-11e9-9803-fc3d991288a4.png alt=QQ截图20181210144823 class=lazyload><figcaption class=image-caption>QQ截图20181210144823</figcaption></figure></p><p>3）连接模型：设备的连接过程𝑆(𝑡)可能变化很大，这取决于设备的类型。例如，智能电表可以每15-30分钟定期唤醒一小段时间，而智能手机可能晚上关闭，白天处于连接状态。在这项工作中，我们考虑一个模型，其中𝑢在协议执行后以概率𝑝<sub>s</sub>进入休眠状态，休眠确定的时间间隔𝑡<sub>s</sub>。</p><p>4）通信链路：把物联网设备连接到区块链网络建模为一个停等重传协议，并假定有一个确定时间t<sub>c</sub>的初始连接建立和验证的过程。</p><p>设备连到区块链网络的多个节点，则是一个一对多拓扑，而连到一个节点，则该节点可能作恶，因为它可以修改收到的信息。</p><a class=post-dummy-target id=同步协议></a><h3>同步协议</h3><p>区块链协议的步骤在比特币系统和以太坊系统都没有明确描述，而是留给了实现。这篇文章概念上定义了两个协议：P1和P2。模拟了需要交换的最少量的信息，同时忽略了区块链协议的其它功能。</p><p>P1中u从连接到的区块链网络中的节点下载完整的区块内容，在本地对工作量和交易做验证，相当于一个全功能节点，但是由于物联网设备的能力限制，在物联网中很难实现。</p><p>P2是一个简化结构，u作为轻节点存在，只接收块头。同时，u定义一个它感兴趣的观察的事件列表，该列表为区块链网络节点所知，事件包括智能合约状态的改变或来自/到某个地址。在观察到事件后，区块链网络节点向𝑢发送已经改变的信息部分以及相应Merkle树，我们假设在每个块周期中以概率𝑝<sub>M</sub>独立地观察到感兴趣的事件，u可以通过改变感兴趣的事件集来调整这个值。</p><p>为了简化场景，我们假设u在同一时间只能和一个区块链网络节点交互，并且只有一个感兴趣的事件。示例中这个事件在u休眠时被观察到，区块链当前状态基于最近的区块头进行重建。如果𝑢同步并且有新块生成，则立即开始协议执行。如果在协议执行结束后𝑢未同步，则由于在执行期间生成新块，之后立即开始新的协议执行。协议执行开始后，不停止直到执行完成，并且𝑢在协议执行期间保持活动状态。以下描述了P1和P2的可能实现。</p><ol><li><p>协议P1</p><p>当u唤醒时，即状态S<sub>1</sub>到S<sub>1</sub>的转换，执行下列步骤：</p><p>（w1,1）𝑢通过长为l<sub>n</sub> bits的消息向每个区块链网络节点请求新块，其中包含本地链长ℎ<sub>u</sub>(𝑡)。</p><p>（w1,2）𝑢从每个区块链网络节点接收长为l<sub>r</sub> bits的响应，其中包含当前区块链长度ℎ(𝑡)。</p><p>（w1,3）if ℎ(t) - ℎ<sub>u</sub>(𝑡)=𝑛 > 0，𝑢随机选择一个区块链网络节点发送长为l<sub>n</sub> bits的消息，请求丢失的𝑛个块。</p><p>（w1,4）所选区块链网络节点发送块。由于存在𝑛块，每个块的长度为𝑙<sub>b</sub> bits，因此消息的总长度为𝑛·𝑙<sub>b</sub> bits</p><p>（w1,5）重复步骤（w1,3） - （w1,4）直到同步。</p><p>u处于连接状态，接收来自区块链网络关于感兴趣事件的通知</p><p>（s1,1）𝑢从每个BN节点接收长为l<sub>r</sub> bits的新块的通知。从第一个通知开始，它等待𝑡<sub>w</sub>秒，以接收所有通知。</p><p>（s1,2）𝑢选择一个BN节点并请求丢失的块。</p><p>（s1,3）所选BN节点发送该块。</p></li><li><p>协议P2</p><p>过程和P1类似，但消息长度要短一点</p><p>（w2,1）𝑢通过长为l<sub>n</sub> bits的消息向每个BN节点请求新块。</p><p>（w2,2）𝑢从每个BN节点接收长为l<sub>r</sub> bits的响应，其中包含可用的新块列表。</p><p>（w2,3）𝑢选择一个BN节点并请求丢失的𝑛个区块头。</p><p>（w2,4）选定的BN节点发送区块头。由于每个区块头的长度为𝑙<sub>h</sub>位，因此消息长度为𝑛·𝑙<sub>h</sub>位。</p><p>（w2,5）重复步骤（w2,3） - （w2,4）直到同步。</p><p>如果𝑢已连接并同步：</p><p>（s2,1）𝑢从每个BN节点收到一个长为l<sub>r</sub> bits的新块的通知。收到第一个通知后，𝑢等待𝑡<sub>w</sub>秒。</p><p>（s2,2）𝑢选择一个BN节点并请求丢失的区块头。</p><p>（s2,3）所选BN节点发送区块头。</p><p>（s2,4）如果观察到感兴趣的事件，则BN节点还发送包含感兴趣的信息（长度为l<sub>i</sub>bits）的数据结构以及长度为𝑙<sub>Pol</sub> bits的Merkle树根。</p></li></ol><a class=post-dummy-target id=分析></a><h3>分析</h3><p>一堆的数学公式，并没有看懂</p><a class=post-dummy-target id=数值结果></a><h3>数值结果</h3><p>这部分展示了各种参数的影响，很有意思，但不想写了。。。</p><a class=post-dummy-target id=结论></a><h3>结论</h3><p>基于区块链的物联网应用的出现促使了对通信系统的要求的研究。这篇文章中，作者研究了几种物联网设备和区块链网络之间同步的协议，并提出了一个模型来研究通信链路质量和区块链参数对同步过程的影响。结果表明，设备的占空比的设计应当同时考虑区块链和通信的参数，以及保证同步过程所需可靠性的无线技术的选择取决于区块链参数。而且，如果协议执行持续时间与平均块生成周期相当，则保持同步的概率会迅速降低。为了减少协议执行的持续时间，区块链验证被委托给外部实体的协议的使用是有益的，尽管它降低了设备的安全性。最后，我们发现区块链协议与主要产生上行链路流量的典型物联网应用不同，需要分配大量的下行链路资源。</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>The article was updated on 2018-12-10</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href="//twitter.com/share?url=https%3a%2f%2fshuzang.top%2f2018%2f12%2fanalysis-of-the-communication-traffic-for-blockchain-synchronization-of-iot-devices%2f&text=Analysis%20of%20the%20Communication%20Traffic%20for%20Blockchain%20Synchronization%20of%20IoT%20Devices&via=" target=_blank title="Share on Twitter"><i class="fab fa-twitter fa-fw"></i></a><a href="//www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fshuzang.top%2f2018%2f12%2fanalysis-of-the-communication-traffic-for-blockchain-synchronization-of-iot-devices%2f" target=_blank title="Share on Facebook"><i class="fab fa-facebook-square fa-fw"></i></a><a href="//reddit.com/submit?url=https%3a%2f%2fshuzang.top%2f2018%2f12%2fanalysis-of-the-communication-traffic-for-blockchain-synchronization-of-iot-devices%2f&title=Analysis%20of%20the%20Communication%20Traffic%20for%20Blockchain%20Synchronization%20of%20IoT%20Devices" target=_blank title="Share on Reddit"><i class="fab fa-reddit fa-fw"></i></a></span></div></div></div><div class=post-info-more><section><span class=tag><a href=https://shuzang.top/tags/%E8%AE%BA%E6%96%87/><i class="fas fa-tag fa-fw"></i>&nbsp;论文</a>&nbsp;</span></section><section><span><a href=javascript:window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=https://shuzang.top>Home</a></span></section></div><div class=post-nav><a href=https://shuzang.top/2018/12/%E6%89%80%E7%BD%97%E9%97%A8%E4%B9%8B%E5%8C%99%E7%9A%84%E5%90%AF%E7%A4%BA/ class=prev rel=prev title=所罗门之匙的启示><i class="fas fa-angle-left fa-fw"></i>所罗门之匙的启示</a>
<a href=https://shuzang.top/blockchain-for-iot/ class=next rel=next title=物联网与区块链>物联网与区块链<i class="fas fa-angle-right fa-fw"></i></a></div></div><div class=post-comment></div></article></div></main><footer class=footer><div class=copyright><div class=copyright-line>Powered by <a href=https://gohugo.io/ target=_blank rel="external nofollow noopener noreffer">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="external nofollow noopener noreffer">LoveIt<i class="far fa-heart fa-fw"></i></a></div><div class=copyright-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2018 - 2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=https://shuzang.top target=_blank>shuzang</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><a href=# class=dynamic-to-top id=dynamic-to-top data-scroll><span>&nbsp;</span>
</a><script src=/js/lib/jquery/jquery.slim.min.js></script><script src=/js/lib/lazysizes/lazysizes.min.js></script><script src=/js/lib/smooth-scroll/smooth-scroll.polyfills.min.js></script><script>window.scroll=new SmoothScroll('[data-scroll]',{speed:300,speedAsDuration:true});</script><link rel=stylesheet href=/css/lib/katex/katex.min.css><script src=/js/lib/katex/katex.min.js></script><script defer src=/js/lib/katex/auto-render.min.js></script><link rel=stylesheet href=/css/lib/katex/copy-tex.min.css><script defer src=/js/lib/katex/copy-tex.min.js></script><script defer src=/js/lib/katex/mhchem.min.js></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:true},{left:"\\(",right:"\\)",display:false},{left:"\\[",right:"\\]",display:true},{left:"$",right:"$",display:false},]});});</script><script src=/js/blog.min.js></script></body></html>